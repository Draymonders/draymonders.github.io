# 数学相关

## 为什么取余都需要用质数

假设hash值是N, 模数是M, 则N % M = r 可以表示成 N = Mq + r 


如果他们最大公因数为k > 1
=> N/k = (M/k)q + (r/k) => (r/k) 必然为整数, 则r的取值只能是{0, k, 2k ... nk}.
这也就意味着这类N的取模余数并不平均。我们当然是想平均的得到余数为{0.....M-1}的结果。

1. 如果N的取值是从1到1kw，每个都出现一次的话，那 M 是否是质数并不影响。
2. 如果N的取值不均匀的话，如上面所讲，如果M和N存在公共数k，最终的余数 r 的取值 只能是 {0,k,2k ... nk}，hash结果并不均匀。